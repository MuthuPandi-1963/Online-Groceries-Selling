{% extends 'shop/base.html' %}

{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card border-0 shadow-lg">
                <div class="card-header bg-white border-0 py-3">
                    <h1 class="h4 mb-0">
                        {% if object %}
                            <i class="fas fa-edit me-2" style="color: var(--primary-color);"></i>Edit Product
                        {% else %}
                            <i class="fas fa-plus-circle me-2" style="color: var(--primary-color);"></i>Add New Product
                        {% endif %}
                    </h1>
                </div>
                <div class="card-body p-4">
                    <form method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        <div class="row g-4">
                            <!-- Name Field -->
                            <div class="col-md-6">
                                <label for="{{ form.name.id_for_label }}" class="form-label">
                                    <i class="fas fa-tag me-2"></i>Product Name
                                </label>
                                {{ form.name }}
                                {% if form.name.errors %}
                                    <div class="alert alert-danger mt-2">
                                        <i class="fas fa-exclamation-circle me-2"></i>{{ form.name.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <!-- Category Field -->
                            <div class="col-md-6">
                                <label for="{{ form.category.id_for_label }}" class="form-label">
                                    <i class="fas fa-folder me-2"></i>Category
                                </label>
                                {{ form.category }}
                                {% if form.category.errors %}
                                    <div class="alert alert-danger mt-2">
                                        <i class="fas fa-exclamation-circle me-2"></i>{{ form.category.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <!-- Base Price Field -->
                            <div class="col-md-6">
                                <label for="{{ form.base_price.id_for_label }}" class="form-label">
                                    <i class="fas fa-rupee-sign me-2"></i>Base Price
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text">â‚¹</span>
                                    {{ form.base_price }}
                                </div>
                                {% if form.base_price.errors %}
                                    <div class="alert alert-danger mt-2">
                                        <i class="fas fa-exclamation-circle me-2"></i>{{ form.base_price.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <!-- Unit Field -->
                            <div class="col-md-6">
                                <label for="{{ form.unit.id_for_label }}" class="form-label">
                                    <i class="fas fa-balance-scale me-2"></i>Unit
                                </label>
                                {{ form.unit }}
                                {% if form.unit.errors %}
                                    <div class="alert alert-danger mt-2">
                                        <i class="fas fa-exclamation-circle me-2"></i>{{ form.unit.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <!-- Minimum Quantity Field -->
                            <div class="col-md-6">
                                <label for="{{ form.min_quantity.id_for_label }}" class="form-label">
                                    <i class="fas fa-cubes me-2"></i>Minimum Order Quantity
                                </label>
                                {{ form.min_quantity }}
                                {% if form.min_quantity.errors %}
                                    <div class="alert alert-danger mt-2">
                                        <i class="fas fa-exclamation-circle me-2"></i>{{ form.min_quantity.errors }}
                                    </div>
                                {% endif %}
                                <div class="form-text text-muted">
                                    <i class="fas fa-info-circle me-1"></i>Minimum quantity that can be ordered
                                </div>
                            </div>

                            <!-- Stock Quantity Field -->
                            <div class="col-md-6">
                                <label for="{{ form.stock_quantity.id_for_label }}" class="form-label">
                                    <i class="fas fa-boxes me-2"></i>Stock Quantity
                                </label>
                                {{ form.stock_quantity }}
                                {% if form.stock_quantity.errors %}
                                    <div class="alert alert-danger mt-2">
                                        <i class="fas fa-exclamation-circle me-2"></i>{{ form.stock_quantity.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <!-- Description Field -->
                            <div class="col-12">
                                <label for="{{ form.description.id_for_label }}" class="form-label">
                                    <i class="fas fa-align-left me-2"></i>Description
                                </label>
                                {{ form.description }}
                                {% if form.description.errors %}
                                    <div class="alert alert-danger mt-2">
                                        <i class="fas fa-exclamation-circle me-2"></i>{{ form.description.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <!-- Image Field -->
                            <div class="col-12">
                                <label for="{{ form.image.id_for_label }}" class="form-label">
                                    <i class="fas fa-image me-2"></i>Product Image
                                </label>
                                {% if object and object.image %}
                                    <div class="mb-2">
                                        <img src="{{ object.image.url }}" alt="{{ object.name }}" class="img-thumbnail" style="max-height: 200px;">
                                    </div>
                                {% endif %}
                                {{ form.image }}
                                {% if form.image.errors %}
                                    <div class="alert alert-danger mt-2">
                                        <i class="fas fa-exclamation-circle me-2"></i>{{ form.image.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <!-- Availability Field -->
                            <div class="col-12">
                                <div class="form-check">
                                    {{ form.is_available }}
                                    <label class="form-check-label" for="{{ form.is_available.id_for_label }}">
                                        <i class="fas fa-check-circle me-2"></i>Product is available for sale
                                    </label>
                                </div>
                                {% if form.is_available.errors %}
                                    <div class="alert alert-danger mt-2">
                                        <i class="fas fa-exclamation-circle me-2"></i>{{ form.is_available.errors }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="d-flex justify-content-between mt-4">
                            <a href="{% url 'product-list' %}" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-2"></i>Back to Products
                            </a>
                            <button type="submit" class="btn btn-primary">
                                {% if object %}
                                    <i class="fas fa-save me-2"></i>Save Changes
                                {% else %}
                                    <i class="fas fa-plus me-2"></i>Create Product
                                {% endif %}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .form-control, .form-select {
        border-radius: 8px;
        padding: 0.8rem 1rem;
        border: 2px solid #e9ecef;
        transition: all 0.3s ease;
    }
    
    .form-control:focus, .form-select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 0.2rem rgba(46, 204, 113, 0.25);
    }
    
    .input-group-text {
        border-radius: 8px 0 0 8px;
        border: 2px solid #e9ecef;
        border-right: none;
        background-color: #f8f9fa;
    }
    
    .input-group .form-control {
        border-radius: 0 8px 8px 0;
    }
    
    .form-check-input:checked {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
    }
    
    .btn {
        padding: 0.8rem 1.5rem;
        border-radius: 8px;
        font-weight: 500;
        transition: all 0.3s ease;
    }
    
    .btn:hover {
        transform: translateY(-2px);
    }
    
    .card {
        border-radius: 15px;
    }
    
    .alert {
        border-radius: 8px;
        padding: 0.5rem 1rem;
    }
    
    .img-thumbnail {
        border-radius: 8px;
        border: 2px solid #e9ecef;
    }
</style>
{% endblock %}
